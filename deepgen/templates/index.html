<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DeepGen Console</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <main class="container">
      <section class="card">
        <h1>DeepGen</h1>
        <p>Upload GEDCOM, review living profiles, configure keys, and run missing-ancestor research.</p>
      </section>

      <section class="card">
        <h2>1. Provider Config</h2>
        <div class="grid">
          <label>LLM Backend
            <select id="llm-backend">
              <option value="openai">openai</option>
              <option value="mlx">mlx</option>
              <option value="none">none</option>
            </select>
          </label>
          <label>OpenAI API Key
            <input id="openai-api-key" type="password" placeholder="sk-..." />
          </label>
          <label>OpenAI Model
            <input id="openai-model" type="text" placeholder="gpt-4.1-mini" />
          </label>
          <label>MLX Model
            <input id="mlx-model" type="text" placeholder="mlx-community/Llama-3.2-3B-Instruct-4bit" />
          </label>
          <label>FamilySearch Client ID
            <input id="family-client-id" type="text" />
          </label>
          <label>FamilySearch Client Secret
            <input id="family-client-secret" type="password" />
          </label>
          <label>NARA API Key
            <input id="nara-api-key" type="password" />
          </label>
        </div>
        <button id="save-config">Save Config</button>
        <p id="config-status" class="status"></p>
      </section>

      <section class="card">
        <h2>2. Upload GEDCOM</h2>
        <input id="gedcom-file" type="file" />
        <button id="upload-btn">Upload</button>
        <p id="upload-status" class="status"></p>
      </section>

      <section class="card">
        <h2>3. Living Person Review</h2>
        <div class="row">
          <label>Mark All Data Use <input id="mark-all-data" type="checkbox" /></label>
          <label>Mark All LLM Research <input id="mark-all-llm" type="checkbox" /></label>
          <button id="mark-all-btn">Mark All</button>
        </div>
        <table id="living-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>XREF</th>
              <th>Birth</th>
              <th>Allow Data Use</th>
              <th>Allow LLM Research</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <button id="save-consent">Save Individual Changes</button>
      </section>

      <section class="card">
        <h2>4. Gap Detection + Research</h2>
        <button id="load-gaps">Load Missing Ancestor Gaps</button>
        <ul id="gap-list"></ul>
        <button id="run-research">Run Research</button>
        <pre id="research-output"></pre>
      </section>

      <section class="card">
        <h2>5. Export GEDCOM</h2>
        <label>Version
          <select id="export-version">
            <option value="7.0">7.0</option>
            <option value="5.5.1">5.5.1</option>
          </select>
        </label>
        <button id="export-btn">Export</button>
        <a id="download-link" href="#" download="deepgen_export.ged">Download Export</a>
      </section>
    </main>
    <script src="/static/app.js"></script>
  </body>
</html>
